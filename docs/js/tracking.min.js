"use strict";(()=>{var a="https://script.google.com/macros/s/AKfycbxEmJdgcerK1ENvsy8IvSnAZDJ6p4fr9hfO87haKbKrVXZaRf2Z3wnRzyQSDl527VtW/exec";function o(e){let t=document.getElementById("progress-bar-fill"),i=document.querySelectorAll(".step");if(!t||!i.length)return;let n=0;e===1?n=0:e===2?n=20:e===3?n=40:e===4?n=60:e===5&&(n=100),t.style.width=n+"%",i.forEach((s,r)=>{let c=r+1;s.classList.remove("active","completed"),c<e?s.classList.add("completed"):c===e&&s.classList.add("active")})}async function l(e){let t=document.getElementById("loading-overlay");t&&(t.style.display="flex");try{let i=await fetch(`${a}?orderID=${e}`);if(!i.ok)throw new Error("Network response was not ok.");let n=await i.json();return n.error?null:n}catch(i){return console.error("Failed to fetch tracking data:",i),null}finally{t&&(t.style.display="none")}}function d(e,t){if(t.innerHTML="",t.classList.remove("hidden"),!e){t.innerHTML='<p class="error-message">Commande non trouv\xE9e. Veuillez v\xE9rifier le num\xE9ro et r\xE9essayer.</p>';return}let n={pending:{text:"En attente",step:1},processing:{text:"En traitement",step:2},completed:{text:"Termin\xE9e",step:3}}[e.status]||{text:"Inconnu",step:0},s=`
        <div class="tracking-header">
            <div class="tracking-info">
                <h3>Commande #${e.orderID}</h3>
                <p class="tracking-date">Date: ${new Date(e.date).toLocaleDateString()}</p>
            </div>
            <div class="tracking-status">
                <span class="status-badge status-${e.status}">${n.text}</span>
            </div>
        </div>
        <div class="tracking-timeline">
            <div class="timeline-item ${n.step>=1?"completed":""}">
                <div class="timeline-icon">\u{1F4DD}</div>
                <div class="timeline-content"><h4>Commande Re\xE7ue</h4><p>Votre commande a \xE9t\xE9 enregistr\xE9e.</p></div>
            </div>
            <div class="timeline-item ${n.step>=2?"completed":""}">
                <div class="timeline-icon">\u2699\uFE0F</div>
                <div class="timeline-content"><h4>En Traitement</h4><p>Nous pr\xE9parons l'activation de votre compte.</p></div>
            </div>
            <div class="timeline-item ${n.step>=3?"completed":""}">
                <div class="timeline-icon">\u2705</div>
                <div class="timeline-content"><h4>Activation Termin\xE9e</h4><p>Votre abonnement est actif. Un email de confirmation a \xE9t\xE9 envoy\xE9.</p></div>
            </div>
        </div>
        ${e.notes?`<div class="tracking-notes"><h4>Notes:</h4><p>${e.notes}</p></div>`:""}
    `;t.innerHTML=s}function m(){let e=document.getElementById("track-order-btn"),t=document.getElementById("order-number"),i=document.querySelector(".tracking-result");if(e&&t&&i){let n=async()=>{let s=t.value.trim();if(!s){alert("Veuillez entrer un num\xE9ro de commande.");return}let r=await l(s);d(r,i)};e.addEventListener("click",n),t.addEventListener("keypress",s=>{s.key==="Enter"&&n()})}}function u(){if(!document.getElementById("activation-progress"))return;let t=1;o(t);let i=setInterval(()=>{if(t++,t>5){clearInterval(i);return}o(t)},2e3)}function v(){document.getElementById("activation-progress")&&u(),document.querySelector(".tracking-search")&&m()}})();
