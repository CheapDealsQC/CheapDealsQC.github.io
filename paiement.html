<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>SpotiDeals – Paiement</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="stylesheet" href="css/style.css">

  <!-- PayPal SDK -->
  <script src="https://www.paypal.com/sdk/js?client-id=AW-bLBrtEPaB0FTD-Oa4rQ1gbQBNLkkqSsAtGh968nfbb-HA_iZh-Cptg_1UzbE9GYagkCPtHFEUosfm&currency=CAD"></script>
  <!-- Stripe Buy Button SDK -->
  <script async src="https://js.stripe.com/v3/buy-button.js"></script>
</head>
<body>
  <div class="container">
    <header><h1>Paiement SpotiDeals</h1></header>

    <section class="card">
      <h2>Choisissez votre moyen de paiement</h2>
      <p>Montant total : <strong>82,62 $ CAD</strong></p>

      <!-- PayPal Button -->
      <div id="paypal-button-container" style="margin-bottom: 20px;"></div>

      <p style="text-align:center; color:#999; margin: 10px 0;">— ou —</p>

      <!-- Stripe Buy Button -->
      <div style="text-align:center;">
        <stripe-buy-button
          buy-button-id="buy_btn_1RTw9lATQVKJIRPOwkarvaV9"
          publishable-key="pk_live_51RTbNaATQVKJIRPObZmmXXYWSD6geESHBf4DyeSY2rcZzecnc3iRFjBlTcUNrI7sEpU4hkqpT4RskHLhDY3zdywG009wFLeiPb">
        </stripe-buy-button>
      </div>
    </section>

    <footer>© 2025 SpotiDeals</footer>
  </div>

  <script>
    // Initialisation du bouton PayPal
    paypal.Buttons({
      style: {
        shape: 'pill',
        color: 'blue',
        label: 'pay',
        layout: 'vertical'
      },
      createOrder: function(data, actions) {
        return actions.order.create({
          purchase_units: [{
            amount: { value: '82.62' },
            invoice_id: 'SD-' + Date.now()
          }]
        });
      },
      onApprove: function(data, actions) {
        return actions.order.capture().then(function(details) {
          alert('✅ Paiement PayPal reçu !\nNuméro de commande : ' + details.id);
          window.location.href = 'index.html';
        });
      }
    }).render('#paypal-button-container');
  </script>
</body>
</html>
