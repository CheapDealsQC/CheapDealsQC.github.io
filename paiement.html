<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>SpotiDeals – Paiement Spotify Premium 12 mois</title>
  <meta name="description" content="Réglez en un clic votre Pack Activation Spotify Premium 12 mois en toute sécurité via PayPal. Traitement rapide et garantie incluse.">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="css/style.css">
</head>
<body>

  <!-- HEADER -->
  <header class="header">
    <div class="container header__inner">
      <a href="index.html" class="logo">SpotiDeals</a>
      <nav class="nav">
        <a href="index.html#features">Fonctionnalités</a>
        <a href="index.html#pricing">Tarifs</a>
        <a href="index.html#how">Comment ça marche</a>
        <a href="index.html#faq">FAQ</a>
      </nav>
      <a href="index.html#commande" class="btn btn--sm">Commander</a>
    </div>
  </header>

  <!-- MAIN CONTENT -->
  <main class="container">
    <h1>Paiement</h1>
    <p>Montant total : <strong>82,62 $ CAD</strong></p>
    <div id="paypal-button-container" style="margin:20px 0;"></div>
    <a href="index.html" class="btn">← Retour à l’accueil</a>
  </main>

  <!-- FOOTER -->
  <footer class="footer">
    <div class="container footer__inner">
      <div>© 2025 SpotiDeals</div>
      <nav>
        <a href="terms.html">CGV</a>
        <a href="privacy.html">Confidentialité</a>
        <a href="contact.html">Contact</a>
      </nav>
    </div>
  </footer>

  <!-- PAYPAL SDK & BUTTON -->
  <script src="https://www.paypal.com/sdk/js?client-id=AW-bLBrtEPaB0FTD-Oa4rQ1gbQBNLkkqSsAtGh968nfbb-HA_iZh-Cptg_1UzbE9GYagkCPtHFEUosfm&currency=CAD"></script>
  <script>
    paypal.Buttons({
      style: { shape:'pill', color:'blue', label:'pay' },
      createOrder: (data, actions) =>
        actions.order.create({
          purchase_units:[{ amount:{ value:'82.62' }, invoice_id:'SD-'+Date.now() }]
        }),
      onApprove: (data, actions) =>
        actions.order.capture().then(details => {
          const email = sessionStorage.getItem('spotifyEmail');
          const user  = sessionStorage.getItem('spotifyUsername');
          const id    = details.id;
          fetch('https://formspree.io/f/xanorewp', {
            method:'POST',
            headers:{'Content-Type':'application/json'},
            body: JSON.stringify({ email, user, orderID:id, method:'PayPal' })
          });
          alert('✅ Paiement reçu ! Numéro de commande : ' + id);
          window.location.href = 'index.html';
        })
    }).render('#paypal-button-container');
  </script>
</body>
</html>
